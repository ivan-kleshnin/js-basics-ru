# 4.5 Циклы

Декларации `let` и `var` по разному ведут себя в `for` циклах:

```
let fns = []
for (let i = 1; i <= 5; i++) {
  fns.push(() => {
    console.log(i)
  })
}
fns.forEach(x => x()) /* 1 2 3 4 5 */

// но

let fns = []
for (var i = 1; i <= 5; i++) {
  fns.push(() => {
    console.log(i)
  })
}
fns.forEach(x => x()) /* 6 6 6 6 6 */
```

Декларация `var` в заголовке цикла создаёт единственную переменную. Каждая лямбда функция
захватывает ссылку на неё. Декларация `let` в заголовке цикла создаёт новую переменную
для каждой итерации.  Каждая лямбда функция захватыет ссылку на соответствующую переменную.
Это объясняет видимый результат.

"Неудачное" поведение `var` в этом случае стало одной из важных причин введения `let` в ES6.

Декларация `const`, в данном вопросе, ведёт себя подобно `var`, т.е. создаёт ровно одну переменную.
Следовательно, из-за запрета переинициализации, не подходит для приведенного случая:

```
let fns = []
for (const i = 1; i <= 5; i++) { // TypeError: Assignment to constant variable.
  fns.push(() => {
    console.log(i)
  })
}
fns.forEach(x => x())
```
